<div id="content">

  <div *ngIf="loading"
    style="position: absolute; background-color: rgba(255, 255, 255, 0.6); width: 100%; height: 175%; z-index: 100000">
    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
      <img src="https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/200.gif" alt="Smiley facg">
    </div>
  </div>

  <div class="row content-col mb-2" id="upper_middle" style="margin-bottom: .0rem!important;margin: 0 20px">
    <div class="col-12 ">
      <div class="bg-white shadow mt-2" style="background: #f4f5f9;border-radius: 6px; ">
      </div>
    </div>
  </div>

  <div class="row content-col " id="middle" style="margin: 0 20px" *ngIf='sku_map'>
    <div class="col-12 ">
      <div class="bg-white shadow mt-2" style="border-radius: 6px;">
        <div class="d-flex justify-content-between align-items-center " style="background:#fff;border-radius: 6px;width: 30%;    padding-top: 36px;height: 25px;">
          <div class="row" style="    margin-left: 20px;margin-top: 26px;width:100%">
            <div class="col-lg">
              <p style="margin-bottom: 0px !important;font-family: 'Montserrat', sans-serif !important; font-size: 14px;font-weight: bold;">Sku Mapping</p>
              <div style="width:100%;background:#17b169;height: 5px;">
              </div>
            </div>
            <div class="col-lg">
              <p style="margin-bottom: 0px !important;font-family: 'Montserrat', sans-serif !important;    font-size: 14px;font-weight: bold;cursor: pointer;" (click)='pipo_click()'>PIPO Rules</p>
            </div>
            
            <div class="col-lg">
              <p style="margin-bottom: 0px !important;font-family: 'Montserrat', sans-serif !important;    font-size: 14px;font-weight: bold;cursor: pointer;" (click)='cvc_click()'>CVC Rules</p>
            </div>
            
          </div>
        </div>
        <div class="d-flex">
          <div class="table-content-col" style="width: 100%;margin-left:15px;margin-right:15px;">
            <div class="panel panel-default">
              <div class="center-block fix-width scroll-inner">
                <br><br>
                <br>
                <div>
                  <input type="text" id="filter-text-box" style="width: 35%;
                  border-radius: 10px;
                  padding-left: 17px;
                  height: 41px;
                  font-family: 'Montserrat', sans-serif !important;
                  margin-bottom: 18px;" [(ngModel)]="searchfilter" placeholder="Search Sku Mapping"
                    (input)="onFilterTextBoxChanged()" />



                  <ag-grid-angular style="width: 100%; height: 100vh;" class="ag-theme-alpine" [rowData]="pipo"
                    [columnDefs]="columnDefs" (gridReady)="onGridReady($event)" (cellClicked)="onCellClicked1($event)"
                    (cellDoubleClicked) = "onCellDoubleClickedSM($event)" (singleClickEdit) = "false"
                    (cellValueChanged)="onCellValueChangedSM($event)">
                  </ag-grid-angular>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row content-col " id="middle" style="margin: 0 20px" *ngIf='pipo_map'>
    <div class="col-12 ">
      <div class="bg-white shadow mt-2" style="border-radius: 6px;">
        <div class="d-flex justify-content-between align-items-center " style="background:#fff;border-radius: 6px;width: 30%;    padding-top: 36px;height: 25px;">
          <div class="row" style="    margin-left: 20px;margin-top: 26px;width:100%">
            <div class="col-lg">
              <p style="margin-bottom: 0px !important;font-family: 'Montserrat', sans-serif !important;    font-size: 14px;font-weight: bold;cursor: pointer;" (click)=sku_click()>Sku Mapping</p>
            </div>
            <div class="col-lg">
              <p style="margin-bottom: 0px !important;font-family: 'Montserrat', sans-serif !important;    font-size: 14px;font-weight: bold;">PIPO Rules</p>
              <div style="width:100%;background:#17b169;height: 5px;"></div>
            </div>
            
            <div class="col-lg">
              <p style="margin-bottom: 0px !important;font-family: 'Montserrat', sans-serif !important;    font-size: 14px;font-weight: bold;cursor: pointer;" (click)=cvc_click()>CVC Rules</p>
            </div>
            
          </div>
        </div>

        <div class="d-flex">
          <div class="table-content-col" style="width: 100%;margin-left:15px;margin-right:15px;">
            <div class="panel panel-default">
              <div class="center-block fix-width scroll-inner">
                <br />
                <div>
                  <br>
                  <h3 class="text-center" style="font-family: 'Montserrat', sans-serif !important;">All Phase In Phase Out rules</h3>
                  <button class="btn btn-primary nextBtn" style="height:46px !important;font-family: 'Montserrat', sans-serif !important;" type="button" (click)="apply1()"> Add New Rule</button>
                  
                  <div>
                    <ag-grid-angular style="width: 100%; height: 90vh;" class="ag-theme-alpine"
                      [rowData]="pipoMapping" [columnDefs]="columnDefs3" (cellClicked)="onCellClicked($event)"
                      (gridReady)="onGridReady($event)">
                    </ag-grid-angular>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="p-2 text-center">
        </div>
      </div>
    </div>
  </div>

  
  <div class="row content-col " id="middle" style="margin: 0 20px" *ngIf='cvc_map'>
    <div class="col-12 ">
      <div class="bg-white shadow mt-2" style="border-radius: 6px;">
        <div class="d-flex justify-content-between align-items-center " style="background:#fff;border-radius: 6px;width: 30%;    padding-top: 36px;height: 25px;">
          <div class="row" style="    margin-left: 20px;margin-top: 26px;width:100%">
            <div class="col-lg">
              <p style="margin-bottom: 0px !important;font-family: 'Montserrat', sans-serif !important; font-size: 14px;font-weight: bold; cursor:pointer;" (click)='sku_click()'>Sku Mapping</p>
            </div>
            <div class="col-lg">
              <p style="margin-bottom: 0px !important;font-family: 'Montserrat', sans-serif !important;    font-size: 14px;font-weight: bold;cursor: pointer;" (click)='pipo_click()'>PIPO Rules</p>
            </div>
            <div class="col-lg">
              <p style="margin-bottom: 0px !important;font-family: 'Montserrat', sans-serif !important; font-size: 14px;font-weight: bold;">CVC Rules</p>
              <div style="width:100%;background:#17b169;height: 5px;"></div>
            </div>
          </div>
        </div>
        <div class="d-flex">
          <div class="table-content-col" style="width: 100%;margin-left:15px;margin-right:15px;">
            <div class="panel panel-default">
              <div class="center-block fix-width scroll-inner">
                <br><br>
                <br>
                <div>
                  <p style="text-align: right; font-family: 'Montserrat', sans-serif !important; font-size: 14px;">Show Active State only
                  <label class="switch">
                    <input type="checkbox" (change) = "stateSwitch()">
                    <span class="slider round"></span>
                  </label>
                  </p>

                  <div *ngIf="hideSharedLinkCopyMessage" class="alert alert-success box-msg " role="alert">
                    <p style="font-family: 'Montserrat', sans-serif !important; font-size: 18px; text-align: center;"><strong>CVC ID: {{zzzcvcID}}</strong> - State changed to {{zzzstate}}</p>
                  </div>

                  <ag-grid-angular style="width: 100%; height: 105vh;" class="ag-theme-alpine" [rowData]="cvcData"
                    [columnDefs]="columnDefsCVC"   (gridReady)="onGridReady($event)" 
                    (cellValueChanged)="onCellValueChangedCVC($event)" (cellClicked)="onCellClickedCVC($event)"
                    (firstDataRendered)="firstDataRenderedCVC($event)" (modelUpdated)="firstDataRenderedCVC($event)"
                    (rowDataUpdated)="firstDataRenderedCVC($event)" (newColumnsLoaded)="firstDataRenderedCVC($event)"
                    (displayedColumnsChanged)="firstDataRenderedCVC($event)" (virtualColumnsChanged)="firstDataRenderedCVC($event)"
                    (viewportChanged)="firstDataRenderedCVC($event)" (bodyScroll)="firstDataRenderedCVC($event)"
                  >
                  </ag-grid-angular>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  

  <div class="modal fade" id="myModal4" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" #mapsku aria-label="Close"><span
              aria-hidden="true">&times;</span></button>
        </div>
        <div class="modal-body">
          <div class="table-responsive mt-3">
            <table class="table">
              <thead class="thead-dark">
                <tr>
                  <th scope="col">Material ID</th>
                  <th scope="col">SKU Name</th>
                  <th scope="col">Map</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td scope="row"> <input type="text" class="form-control searchbox" [(ngModel)]="skuname"
                      placeholder="Material ID" aria-describedby="basic-addon1"></td>
                  <td> <input type="text" class="form-control searchbox" [(ngModel)]="materialid" placeholder="SKU Name" aria-describedby="basic-addon1"></td>
                  <td>
                    <select [(ngModel)]="mappedFG">
                      <ng-container *ngFor="let filter of mappingdrop; let filterIndex=index">
                        <option [value]="filter">{{filter}}</option>
                      </ng-container>
                    </select>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="col-sm-12 text-center" (click)="map_sku();"><a href="javascript:void(0)" class="btn">Add</a></div>
        </div>
      </div>
    </div>
  </div>

  <a href="javascript:void(0);" [hidden]="true" data-target="#myModal4_1" data-toggle="modal" #myModal4_1
    style="font-family: 'Montserrat', sans-serif !important;">Check</a>

  <div class="modal fade" id="myModal4_1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="false" style="background: rgba(59, 59, 59, 0.5);">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" #mapsku aria-label="Close"><span
              aria-hidden="true">&times;</span></button>
        </div>
        <div class="modal-body">
          <div class="table-responsive mt-3">
            <table class="table">
              <thead class="thead-dark">
                <tr>
                  <th scope="col">Lead Sku</th>
                  <th scope="col">Animal</th>


                </tr>
              </thead>
              <tbody>
                <tr>


                  <td [innerText]='material_1' style="display: none;"></td>
                  <td [innerText]='lead_sku' disabled></td>

                  <td>
                    <select [(ngModel)]="mappedFG_1">
                      <ng-container *ngFor="let filter of mappingdrop_1; let filterIndex=index">
                        <option [value]="filter">{{filter}}</option>
                      </ng-container>
                    </select></td>


                </tr>


              </tbody>
            </table>



          </div>
          <div class="col-sm-12 text-center" (click)="map_sku_1();"><a href="javascript:void(0)" class="btn">Add</a>
          </div>
        </div>

      </div>
    </div>
  </div>

  <a href="javascript:void(0);" [hidden]="true" data-target="#saveFilterModal" data-toggle="modal" #saveFilterModal>Open
    Save Filter Modal</a>
  <div class="modal fade save-filter-modal" id="saveFilterModal" tabindex="-1" role="dialog" data-backdrop="false" style="background: rgba(59, 59, 59, 0.5);">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Gantt Chart</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close" #saveFilterModalCancel>
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-sm-4">Select forecasting</div>


          </div>

          <div class="table-responsive mt-3">
            <table class="table">
              <thead class="thead-dark">
                <tr>
                  <th scope="col">Transistion</th>
                  <th scope="col">FGID</th>
                  <th scope="col">201942....<span>{{startweek_transistion_apply}}</span>....{{maxweek}}</th>
                  <th scope="col" style="width:75px;">Current</th>
                  <th scope="col" style="width:75px;">New</th>
                </tr>
              </thead>
              <tbody>
                <tr>

                  <td [innerText]="fromsku_transistion_apply" name="fromsku_transistion_apply"
                    id="fromsku_transistion_apply"></td>
                  <td [innerText]="forecasting_fgid" name="forecasting_fgid" id="forecasting_fgid"></td>
                  <td style="width:45%;">


                    <div class="progress">
                      <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" value="30"
                        min="0" max="100" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" style="width: 30%">
                      </div>
                    </div>
                  </td>
                  <td>100%</td>
                  <td>0%</td>
                </tr>









                <tr>

                  <td><span [innerText]="tosku_transistion_apply"></span></td>

                  <td [innerText]="forecasting_fgid" name="forecasting_fgid" id="forecasting_fgid"></td>
                  <td style="width:45%;">
                    <div class="progress">
                      <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                        aria-valuenow="100" aria-valuemin="30" aria-valuemax="100" style="margin-left:30%;width: 70%">
                      </div>
                    </div>
                  </td>
                  <td>0%</td>
                  <td>100%</td>
                </tr>
              </tbody>
            </table>



          </div>
        </div>
      </div>
    </div>
  </div>

  <a href="javascript:void(0);" [hidden]="true" data-target="#AddNew" data-toggle="modal"
    style="font-family: 'Montserrat', sans-serif !important;" #AddNew>Add New Schedule</a>
  <div class="modal fade save-filter-modal" id="AddNew" tabindex="-1" role="dialog" data-backdrop="false" style="background: rgba(59, 59, 59, 0.5);">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" style="font-family: 'Montserrat', sans-serif !important;">New Phase in Phase out rule
          </h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close" #saveFilterModalCancel>
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="row">

            <div class="form-group col-sm-12 " style="width:70%" align="center">
              <label style="font-family: 'Montserrat', sans-serif !important;">Current SKU</label>
              
              <input type="text" style="background-clip: padding-box;
              border: 1px solid #ced4da; width: 418px; height: 42px; padding: 8 56 8 16px;
              font-family: 'Montserrat', sans-serif !important;
              background-color: #fff;" class="form-control"
              [(ngModel)]="fromskuSearch" (focus)='fgshow()' placeholder="Select Current SKU">

              <div class="mb-2" style="max-height: 200px; width:410px; overflow: auto;" data-simplebar *ngIf="pressed">
                <div class="bg-white mt-1 p-1 pl-2 d-flex" *ngFor="let sku of dropJSON | filter_currentsku : getCallbackCurrentSku() ;let i=index ">
                    <p class="m-0 pcs" (click)="currentSkuSelected(sku.skuname)">{{sku.skuname}}</p>
                </div>
              </div>
              
            </div>

            <script>
              $(document).ready(function () {
                $('select').selectize({
                  sortField: 'text'
                });
              });
            </script>


          </div>

          <div class="row">
            <div class="form-group col-sm-12 " style="width:70%" align="center">
              <span style="font-family: 'Montserrat', sans-serif !important;">Phase in SKU</span> <input type="checkbox"
                (change)="second_type1()" style="float:right;margin-right: 28px;" id="phaseout" checked>
              <div *ngIf="first_type">
                <select [(ngModel)]="tosku" id="harshit" style="background-clip: padding-box;
                    border: 1px solid #ced4da;
                    font-family: 'Montserrat', sans-serif !important;
                    background-color: #fff;">
                  <option value="select" disabled selected>Select Phase in SKU</option>
                  <ng-container *ngFor="let filter of drop2; let filterIndex=index">
                    <option [value]="filter">{{filter}}</option>
                  </ng-container>
                </select>
              </div>
            </div>

          </div>

          <div class="row phaseout" *ngIf="first_type">

            <ul>

              <li><input class="mr-1" type="radio" name="a" (change)="type(1)"><img src="assets/images/1.png"></li>

              <li><input class="mr-1" type="radio" name="a" (change)="type(2)"><img src="assets/images/2.png"></li>



              <li><input class="mr-1" type="radio" name="a" (change)="type(3)"><img src="assets/images/3.png"></li>


              <li><input class="mr-1" type="radio" name="a" (change)="type(4)"><img src="assets/images/4.png"></li>


              <li><input class="mr-1" type="radio" name="a" (change)="type(5)"><img src="assets/images/5.png"></li>



            </ul>






          </div>



          <div class="row phaseout" *ngIf="second_type">

            <ul>

              <li><input class="mr-1" type="radio" name="a" (change)="type(6)"><img src="assets/images/6.png"></li>

              <li><input class="mr-1" type="radio" name="a" (change)="type(7)"><img src="assets/images/7.png"></li>



              <li><input class="mr-1" type="radio" name="a" (change)="type(8)"><img src="assets/images/8.png"></li>


              <li><input class="mr-1" type="radio" name="a" (change)="type(9)"><img src="assets/images/9.png"></li>


              <li><input class="mr-1" type="radio" name="a" (change)="type(10)"><img src="assets/images/5.png"></li>



            </ul>






          </div>


          <div class="row" align="center" style="margin-left: 10px" *ngIf="newsku">



            <div class="form-group col-sm-5">
              <label style="font-family: 'Montserrat', sans-serif !important;">From</label>

              <input type="week" style="font-family: 'Montserrat', sans-serif !important;" min="2020-W23"
                (change)="from_date_table()" [(ngModel)]="from_date">
            </div>

            <div class="form-group col-sm-5" style="margin-left: 5px" *ngIf='second_week'>
              <label style="font-family: 'Montserrat', sans-serif !important;">Until</label>

              <input style="font-family: 'Montserrat', sans-serif !important;" type="week" min="2020-W24"
                (change)="from_date_table()" [(ngModel)]="to_date">
            </div>


          </div>



          <div class="row" *ngIf="date_table">


            <div class="col-sm-12" align="center">
              <table class="table" style="width: 100%">
                <thead>
                  <tr style="font-family: 'Montserrat', sans-serif !important;">
                    <th> <span class="text-muted">Week</span></th>
                    <th><span class="text-muted">Ratio â€“ Out SKU</span></th>
                    <th><span class="text-muted">Ratio - In SKU</span></th>
                  </tr>
                </thead>

                <tbody style="font-family: 'Montserrat', sans-serif !important;"
                  *ngFor="let data of dates; let i=index">
                  <tr>
                    <td>{{data.week}}</td>
                    <td><input type="number" (change)="hello2(i)" [(ngModel)]="data.one" [innerText]="data.one"></td>
                    <td>{{data.two}}</td>

                  </tr>

                </tbody>

              </table>
            </div>

            <button style="height: 40px;
                    padding: 0 !important;
                    font-family: 'Montserrat', sans-serif !important;
                    margin-left: 28% !important;" class="btn btn-primary nextBtn" align="center" type="button"
              (click)="apply()"> Save</button>
            <!-- <div >
                  <table class="table"  *ngFor="let data of dates; let i=index">
                    <tr style="background-color: #fff">
                      <th > <span class="text-muted">{{data}}</span></th>
                      <th ><span class="text-muted"></span></th>
                      <th ><span class="text-muted"></span></th>
                    </tr>
                
                  </table>
                </div> -->


          </div>




        </div>
      </div>
    </div>
  </div>

  <a href="javascript:void(0);" [hidden]="true" data-target="#AddNew_1" data-toggle="modal"
    style="font-family: 'Montserrat', sans-serif !important;" #AddNew_1>Add New Schedule</a>
  <div class="modal fade save-filter-modal" id="AddNew_1" tabindex="-1" role="dialog" data-backdrop="false" style="background: rgba(59, 59, 59, 0.5);">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" style="font-family: 'Montserrat', sans-serif !important;"> Schedule</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close" #saveFilterModalCancel>
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">




          <div class="row">


            <div class="form-group col-sm-12 " style="width:70%" align="center">
              <label style="font-family: 'Montserrat', sans-serif !important;">Current SKU</label>
              <input type="text" disabled id="select1" [(ngModel)]="edit_fromsku" (change)="populate_drop2()" style="background-clip: padding-box;
                border: 1px solid #ced4da;
                background-color: #fff;
                border-radius: 4px;width: 90%;
                font-family: 'Montserrat', sans-serif !important;
    display: inline-block;
    font: inherit;
    line-height: 1.5em;
    padding: 0.5em 3.5em 0.5em 1em;
    margin: 0;
    box-sizing: border-box;
    -webkit-appearance: none;">
              <!-- <option value="select" [innerText]="edit_from_sku" selected>{{edit_from_sku}}</option>
                  
                  </select> -->
            </div>


          </div>

          <div class="row">
            <div class="form-group col-sm-12 " style="width:70%" align="center">
              <span style="font-family: 'Montserrat', sans-serif !important;">Phase in SKU</span>

              <input type="text" disabled [(ngModel)]="edit_tosku" [innerText]="edit_to_sku" id="harshit" style="background-clip: padding-box;
                  border: 1px solid #ced4da;
                  background-color: #fff;width: 90%;
    border-radius: 4px;
    display: inline-block;
    font-family: 'Montserrat', sans-serif !important;
    font: inherit;
    line-height: 1.5em;
    padding: 0.5em 3.5em 0.5em 1em;
    margin: 0;
    box-sizing: border-box;
    -webkit-appearance: none;">
              <!-- <option value="select"  selected>{{edit_to_sku}}</option> -->


              <!-- </select> -->
            </div>

          </div>
















          <div class="row">
            <div class="form-group col-sm-12 " style="width:70%" align="center">
              <span style="font-family: 'Montserrat', sans-serif !important;">Type</span>
              <br>
              <input type="text" disabled [(ngModel)]="edit_type" [innerText]="edit_type_2" id="harshit12" style="background-clip: padding-box;
               border: 1px solid #ced4da;
               background-color: #fff;width: 90%;
 border-radius: 4px;
 display: inline-block;
 font: inherit;
 font-family: 'Montserrat', sans-serif !important;
 line-height: 1.5em;
 padding: 0.5em 3.5em 0.5em 1em;
 margin: 0;
 box-sizing: border-box;
 -webkit-appearance: none;">
              <!-- <option value="select"  selected>{{edit_to_sku}}</option> -->


              <!-- </select> -->
            </div>

          </div>




          <!-- 
            <div class="row">              
              <div class="form-group col-sm-12 " style="width:70%" align="center">
               <span>Type</span> 
               
               <input type="text" disabled [(ngModel)]="edit_type" [innerText]="edit_type_2" id="harshit12" style="background-clip: padding-box;
               border: 1px solid #ced4da;
               background-color: #fff;width: 90%;
 border-radius: 4px;
 display: inline-block;
 font: inherit;
 line-height: 1.5em;
 padding: 0.5em 3.5em 0.5em 1em;
 margin: 0;
 box-sizing: border-box;
 -webkit-appearance: none;" >
             
            
              -->

          <div class="row">


            <div class="col-sm-12" align="center">
              <table class="table" style="width: 100%;font-family: 'Montserrat', sans-serif !important;">
                <thead>
                  <tr>
                    <th> <span class="text-muted">Week</span></th>
                    <th><span class="text-muted">Ratio 1</span></th>
                    <th><span class="text-muted">Ratio 2</span></th>
                  </tr>
                </thead>

                <tbody *ngFor="let data of dates_1_prev; let i=index">
                  <tr>
                    <td>{{data.week}}</td>
                    <td>{{data.one}}</td>
                    <td>{{data.two}}</td>

                  </tr>

                </tbody>

                <tbody *ngFor="let data of dates_1_next; let i=index">
                  <tr>
                    <td>{{data.week}}</td>
                    <td><input type="number" (change)="hello2_1(i)" [(ngModel)]="data.one" [innerText]="data.one"></td>
                    <td>{{data.two}}</td>

                  </tr>

                </tbody>

              </table>
            </div>

            <button style="height: 40px;
                    padding: 0 !important;
                    margin-left: 28% !important;" class="btn btn-primary nextBtn" align="center" type="button"
              (click)="apply_1()"> Submit</button>
            <!-- <div >
                  <table class="table"  *ngFor="let data of dates; let i=index">
                    <tr style="background-color: #fff">
                      <th > <span class="text-muted">{{data}}</span></th>
                      <th ><span class="text-muted"></span></th>
                      <th ><span class="text-muted"></span></th>
                    </tr>
                
                  </table>
                </div> -->


          </div>




        </div>
      </div>
    </div>
  </div>

  <a href="javascript:void(0);" [hidden]="true" data-target="#UpdateNew" data-toggle="modal" #UpdateNew
    style="font-family: 'Montserrat', sans-serif !important;">Check</a>
  <div class="modal fade save-filter-modal" id="AddNew" tabindex="-1" role="dialog" data-backdrop="false" style="background: rgba(59, 59, 59, 0.5);">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" style="font-family: 'Montserrat', sans-serif !important;"> Schedule</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close" #saveFilterModalCancel>
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="row">


            <div class="form-group col-sm-12 " style="width:70%" align="center">
              <label style="float: left;
                margin-left: 30px;font-family: 'Montserrat', sans-serif !important;">Current SKU</label>
              <!-- <select id="select1" [(ngModel)]="fromsku" (change)="populate_drop2()" style="background-clip: padding-box;
                border: 1px solid #ced4da;
                background-color: #fff;">
                    <option value="select"  selected>Select current SKU</option>
                    <ng-container *ngFor="let filter of drop; let filterIndex=index" >
                            <option [value]="filter">{{filter}}</option>
                      </ng-container>
                  </select> -->

              <input type="text" [innerText]="dates1[0].fromid" disabled>

            </div>


          </div>

          <div class="row">
            <div class="form-group col-sm-12 " style="width:70%" align="center" style="    float: left;
                 margin-left: 30px;">
              <span style="    float: left;
                  font-family: 'Montserrat', sans-serif !important;
                  margin-left: 30px;">Phase in SKU</span> <input type="checkbox" (change)="second_type1()"
                style="float:right;margin-right: 28px;" id="phaseout">

              <!-- <select [(ngModel)]="tosku" id="harshit" style="background-clip: padding-box;
                  border: 1px solid #ced4da;
                  background-color: #fff;">
                      <option value="select" disabled selected>Select Phase in SKU</option>
                  <ng-container *ngFor="let filter of drop2; let filterIndex=index">
                      <option [value]="filter">{{filter}}</option>
                </ng-container>
              </select> -->


              <input style="font-family: 'Montserrat', sans-serif !important;" type="text" [innerText]="dates1[0].toid"
                disabled>
            </div>

          </div>
          <!-- 
            <div class="row phaseout" *ngIf="first_type">
              <ul>
                <li><input class="mr-1" type="radio" name="a" 
                  (change)="type(1)"><img src="assets/images/1.png"></li>
                  <li><input class="mr-1" type="radio" name="a" 
                    (change)="type(2)"><img src="assets/images/2.png"></li>
                    <li><input class="mr-1" type="radio" name="a" 
                      (change)="type(3)"><img src="assets/images/3.png"></li>
                      <li><input class="mr-1" type="radio" name="a"
                        (change)="type(4)"><img src="assets/images/4.png"></li>
                  
                        <li><input class="mr-1" type="radio" name="a"
                          (change)="type(5)"><img src="assets/images/5.png"></li>
              </ul>
              
             
            </div>
            <div class="row phaseout" *ngIf="second_type">
              <ul>
                <li><input class="mr-1" type="radio" name="a" 
                  (change)="type(6)"><img src="assets/images/6.png"></li>
                  <li><input class="mr-1" type="radio" name="a" 
                    (change)="type(7)"><img src="assets/images/7.png"></li>
                    <li><input class="mr-1" type="radio" name="a" 
                      (change)="type(8)"><img src="assets/images/8.png"></li>
                      <li><input class="mr-1" type="radio" name="a"
                        (change)="type(9)"><img src="assets/images/9.png"></li>
                  
                        <li><input class="mr-1" type="radio" name="a"
                          (change)="type(10)"><img src="assets/images/5.png"></li>
              </ul>
              
             
            </div> -->

          <!-- 
            <div class="row" align="center"  style="margin-left: 10px" *ngIf="newsku">
       
                        <div class="form-group col-sm-5">
                          <label>From</label>
                          
                          <input type="week" (change)="from_date_table()"  [(ngModel)]="from_date">
                       </div>
                     <div class="form-group col-sm-5" style="margin-left: 5px">
                        <label>Date</label>
                        
                            <input type="week" (change)="from_date_table()"  [(ngModel)]="to_date" >
                      </div>
              
            </div> -->



          <div class="row" *ngIf="date_table">


            <div class="col-sm-12" align="center">
              <table class="table" style="width: 100%;font-family: 'Montserrat', sans-serif !important;">
                <thead>
                  <tr>
                    <th> <span class="text-muted">Week</span></th>
                    <th><span class="text-muted">Ratio 1</span></th>
                    <th><span class="text-muted">Ratio 2</span></th>
                  </tr>
                </thead>

                <tbody *ngFor="let data of dates1; let i=index">
                  <tr>
                    <td>{{data.week}}</td>
                    <td><input type="number" (change)="hello2(i)" [(ngModel)]="data.one" [innerText]="data.one"></td>
                    <td>{{data.two}}</td>

                  </tr>

                </tbody>

              </table>
            </div>

            <!-- <button style="height: 40px;
                    padding: 0 !important;
                    margin-left: 28% !important;" class="btn btn-primary nextBtn"  align="center"  type="button" (click)="apply()" > Submit</button> -->
            <!-- <div >
                  <table class="table"  *ngFor="let data of dates; let i=index">
                    <tr style="background-color: #fff">
                      <th > <span class="text-muted">{{data}}</span></th>
                      <th ><span class="text-muted"></span></th>
                      <th ><span class="text-muted"></span></th>
                    </tr>
                
                  </table>
                </div> -->


          </div>




        </div>
      </div>
    </div>
  </div>

  <a href="javascript:void(0);" [hidden]="true" data-target="#saveFilterModal12" data-toggle="modal"
    #saveFilterModal12>Open Save Filter Modal</a>
  <div class="modal fade save-filter-modal" id="saveFilterModal12" tabindex="-1" role="dialog" data-backdrop="false" style="background: rgba(59, 59, 59, 0.5);">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Gantt Chart</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close" #saveFilterModalCancel12>
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-sm-4">Select forecasting</div>


          </div>

          <div class="table-responsive mt-3">
            <table class="table">
              <thead class="thead-dark">
                <tr>
                  <th scope="col">Transistion</th>
                  <th scope="col">FGID</th>
                  <th scope="col">201942....<span>{{startweek_transistion_apply}}</span>....{{maxweek}}</th>
                  <th scope="col" style="width:75px;">Current</th>
                  <th scope="col" style="width:75px;">New</th>
                </tr>
              </thead>
              <tbody>
                <tr>

                  <td [innerText]="fromsku_transistion_apply" name="fromsku_transistion_apply"
                    id="fromsku_transistion_apply"></td>
                  <td [innerText]="forecasting_fgid" name="forecasting_fgid" id="forecasting_fgid"></td>
                  <td style="width:45%;">


                    <div class="progress">
                      <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" value="30"
                        min="0" max="100" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" style="width: 30%">
                      </div>
                    </div>
                  </td>
                  <td>100%</td>
                  <td>0%</td>
                </tr>










              </tbody>
            </table>



          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="myModal4_6" tabindex="-1" role="dialog" aria-labelledby="myModalLabel_6">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" #addsku aria-label="Close"><span
              aria-hidden="true">&times;</span></button>
        </div>
        <div class="modal-body">
          <div class="table-responsive mt-3">
            <table class="table">
              <thead class="thead-dark">
                <tr>
                  <th scope="col">Material ID</th>
                  <th scope="col">SKU Name</th>

                </tr>
              </thead>
              <tbody>
                <tr>
                  <td scope="row"> <input type="text" class="form-control searchbox" [(ngModel)]="materialidnumber"
                      placeholder="Material ID"></td>
                  <td> <input type="text" class="form-control searchbox" [(ngModel)]="skunamenew"
                      placeholder="SKU Name"></td>
                </tr>


              </tbody>
            </table>



          </div>
          <div class="col-sm-12 text-center" (click)="addingSKU();"><a href="javascript:void(0)" class="btn">Add</a>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div class="modal fade" id="myModal_gant" #myModal_gant tabindex="-1" role="dialog" aria-labelledby="myModal_gant">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" #gantchart aria-label="Close"><span
              aria-hidden="true">&times;</span></button>
        </div>
        <div class="modal-body">

          <div class="row">
            <div class="col-sm-4">Select forecasting</div>


          </div>

          <div class="table-responsive mt-3">
            <table class="table">
              <thead class="thead-dark">
                <tr>
                  <th scope="col">From ID</th>

                  <th scope="col">201942.......<span>{{date}}</span>...........................................Till date
                  </th>
                  <th scope="col" style="width:75px;">Current</th>
                  <th scope="col" style="width:75px;">New</th>
                </tr>
              </thead>
              <tbody>
                <tr>

                  <td [innerText]="fromsku" name="fromsku" id="fromsku"></td>
                  <td style="width:45%;">
                    <div class="progress">
                      <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" value="30"
                        min="0" max="100" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" style="width: 30%">
                      </div>
                    </div>
                  </td>
                  <td>100%</td>
                  <td>0%</td>
                </tr>


                <tr>

                  <td><span [innerText]="tosku"></span></td>
                  <td style="width:45%;">
                    <div class="progress">
                      <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                        aria-valuenow="100" aria-valuemin="30" aria-valuemax="100" style="margin-left:30%;width: 70%">
                      </div>
                    </div>
                  </td>
                  <td>0%</td>
                  <td>100%</td>
                </tr>
              </tbody>
            </table>



          </div>
        </div>

      </div>
    </div>
  </div>

  <!--pipodetails-->
  <a href="javascript:void(0);" [hidden]="true" data-target="#myModal4_pipodetails" data-toggle="modal" #myModal4_pipodetails
  style="font-family: 'Montserrat', sans-serif !important;">Check</a>
  <div class="modal fade" id="myModal4_pipodetails" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="false" style="background: rgba(59, 59, 59, 0.5);">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">

        <div class="modal-header">
          <p style="font-weight: bolder;">SKU {{thematerialname}}</p>
          <button type="button" class="close" data-dismiss="modal" #mapsku aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" *ngIf="gotten_material_details">
          <table class="table">
            <thead>
              <tr>
                <th scope="col">Brand</th>
                <th scope="col">Own/3PP</th>
                <th scope="col">Primary Unit</th>
                <th scope="col">ABV</th>
              </tr>
            </thead>
            <tbody>
              <td>{{thebrand}}</td>
              <td>{{theown3pp}}</td>
              <td>{{theprimaryunit}}</td>
              <td>{{theabv}}</td>
            </tbody>
            <thead>
              <tr>
                <th scope="col">Sub-Brand</th>
                <th scope="col">Global Category</th>
                <th scope="col">Pack Size</th>
                <th scope="col">Segment</th>
              </tr>
            </thead>
            <tbody>
              <td>{{thesubbrand}}</td>
              <td>{{theglobalcategory}}</td>
              <td>{{thepacksize}}</td>
              <td>{{thesegment}}</td>
            </tbody>
            <thead>
              <tr>
                <th scope="col">Material Group</th>
                <th scope="col">Local Category</th>
                <th scope="col">Pack Type</th>
                <th scope="col">Since</th>
              </tr>
            </thead>
            <tbody>
              <td>{{thematerialgroup}}</td>
              <td>{{thelocalcategory}}</td>
              <td>{{thepacktype}}</td>
              <td>{{thesince}}</td>
            </tbody>
          </table>
        </div>


        <div class="modal-header">
          <p style="font-weight: bolder;">FG {{thefgname}}</p>
        </div>
        <div *ngIf="!fromFull">
          <p style="font-weight: bold;">---This FG has no PIPO rules associated with any of its materials---</p>
        </div>
        <div class="modal-body" *ngIf="fromFull">
          <div class="table-responsive mt-3">
            <table class="table">
              <thead class="thead-dark">
                <tr>
                  <th scope="col">Material</th>
                  <th scope="col">SKU name</th>
                  <th scope="col">Segment</th>
                  <th scope="col">Week last seen</th>
                </tr>
              </thead> 
              <tbody>
                <tr>
                  <td>{{fromid}}</td>
                  <td>{{fromname}}</td>
                  <td>{{thesegment}}</td>
                  <td>{{fromwls}}</td>
                </tr>
                <tr>
                  <td>{{toid}}</td>
                  <td>{{toname}}</td>
                  <td>{{thesegment}}</td>
                  <td>{{towls}}</td>
                </tr>
              </tbody>
            </table>
          </div>
          <div style="zoom: 133% !important">
            <fusioncharts
              width="525"
              height="300"
              type="msline"
              [dataSource]="dataSource"
            >
            </fusioncharts>
          </div>
        </div>

      </div>
    </div>
  </div>

  <script type="text/javascript">
    $(document).ready(function () {
      $('select').selectize({
        sortField: 'text'
      });
    });

  </script>

  <link rel="stylesheet" href="https://unpkg.com/ag-grid-community/dist/styles/ag-grid.css">
  <link rel="stylesheet" href="https://unpkg.com/ag-grid-community/dist/styles/ag-theme-alpine.css">

  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500&display=swap" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.6/js/standalone/selectize.min.js"
    integrity="sha256-+C0A5Ilqmu4QcSPxrlGpaZxJ04VjsRjKu+G82kl5UJk=" crossorigin="anonymous"></script>
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.6/css/selectize.bootstrap3.min.css"
    integrity="sha256-ze/OEYGcFbPRmvCnrSeKbRTtjG4vGLHXgOqsyLFTRjg=" crossorigin="anonymous" />